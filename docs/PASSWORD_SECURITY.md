# 密码安全说明

## Chrome 密码泄露警告的原因

当您在登录时看到 Chrome 的"密码遭遇数据泄露"警告时，**这不是您的网站安全问题**，而是因为：

1. **使用了常见的弱密码**：如 `test123456`、`password123` 等
2. Chrome 会检查密码是否在已知的数据泄露数据库中（这些密码曾在其他网站被泄露）
3. 这是 Chrome 的安全功能，帮助用户避免使用已被泄露的密码

## 我们的密码安全措施

✅ **已实施的安全措施：**

### 1. 密码加密存储
```typescript
// 使用 bcrypt 加密，salt rounds = 10
const passwordHash = await bcrypt.hash(password, 10);
```
- 使用业界标准的 bcrypt 算法
- 密码加盐（salt）哈希存储
- 永不存储明文密码

### 2. 安全的密码验证
```typescript
const isPasswordValid = await bcrypt.compare(password, passwordHash);
```
- 使用时序攻击安全的比较方法
- 避免密码泄露风险

### 3. 密码强度要求（已增强）

**新的密码要求：**
- ✅ 至少 8 个字符（之前是 6 个）
- ✅ 至少包含一个大写字母 (A-Z)
- ✅ 至少包含一个小写字母 (a-z)
- ✅ 至少包含一个数字 (0-9)
- ✅ 至少包含一个特殊字符 (!@#$%^&* 等)

**示例强密码：**
- `MyP@ssw0rd2024!`
- `Secure#Pass123`
- `Test@2024App!`

### 4. 实时密码强度指示器

注册页面现在包含可视化的密码强度指示器：
- 🔴 **弱**：不满足所有要求
- 🟡 **中等**：满足基本要求
- 🟢 **强**：满足大部分要求
- 🟢 **很强**：满足所有要求

### 5. 会话安全
```typescript
session: {
  strategy: "jwt",
  maxAge: 30 * 24 * 60 * 60, // 30 天
}
```
- 使用 JWT 令牌
- 设置合理的过期时间
- 使用 NEXTAUTH_SECRET 签名

## 如何避免 Chrome 警告

### 测试账户
注册时使用符合要求的强密码，例如：
```
姓名: 测试用户
邮箱: test@example.com
密码: MyTest@2024Pass!
```

### 生产环境
建议用户：
1. 使用密码管理器（如 1Password、LastPass）
2. 为每个网站使用唯一的强密码
3. 定期更换重要账户的密码

## 额外的安全建议（未来可实施）

### 可选的增强措施：
1. **双因素认证 (2FA)**
   - 短信验证码
   - TOTP 应用（Google Authenticator）
   - 邮箱验证码

2. **密码历史记录**
   - 禁止重复使用最近的 N 个密码

3. **密码过期策略**
   - 强制定期更换密码（企业版）

4. **登录失败限制**
   - 防止暴力破解
   - IP 级别的速率限制

5. **异常登录检测**
   - 新设备登录通知
   - 异常地理位置警告

6. **会话管理**
   - 查看活跃会话
   - 远程登出其他设备

## 密码重置功能（待实现）

当前登录页面的"忘记密码？"链接尚未实现，未来可以添加：
1. 邮箱验证码重置
2. 安全问题验证
3. 时效性重置链接

## 总结

**您的应用密码安全性已经很好！** Chrome 的警告只是提醒用户不要使用常见的弱密码。

现在的密码策略：
- ✅ 加密存储（bcrypt）
- ✅ 强密码要求（8+ 字符，混合字符类型）
- ✅ 实时强度指示器
- ✅ 安全的验证流程

**使用符合新要求的强密码注册，Chrome 将不再显示警告！**
