# Settings 功能测试清单

## 快速测试指南

### 前置条件
- [x] 已登录用户账户
- [x] 数据库连接正常
- [x] 项目正在运行

---

## 测试步骤

### 1️⃣ 访问Settings页面

**操作：**
1. 点击右上角用户头像
2. 在下拉菜单中点击 "设置" / "Settings"

**预期结果：**
- ✅ 成功进入 `/settings` 页面
- ✅ 页面标题显示 "账户设置" / "Account Settings"
- ✅ 显示两个Tab：个人信息 和 安全设置
- ✅ 默认显示"个人信息"标签页

---

### 2️⃣ 测试用户名修改

**操作：**
1. 在"个人信息"标签页
2. 查看邮箱字段（应该是灰色不可编辑的）
3. 修改用户名为新名称，例如 "Test User Updated"
4. 点击"保存更改"按钮

**预期结果：**
- ✅ 邮箱显示当前邮箱，且为只读状态
- ✅ 提示文字："邮箱地址不可修改"
- ✅ 用户名输入框可以编辑
- ✅ 点击保存后显示"保存中..."
- ✅ 成功后显示绿色提示："用户名更新成功"
- ✅ 用户名立即更新（刷新页面后仍然保持）
- ✅ 导航栏用户菜单中的名字也更新了

**错误测试：**
- 清空用户名 → 显示红色错误："Name is required"
- 输入超长用户名（>100字符） → 显示错误提示

---

### 3️⃣ 测试密码修改（正常流程）

**操作：**
1. 切换到"安全设置"标签页
2. 填写表单：
   - 当前密码：输入正确的密码
   - 新密码：输入符合要求的新密码，例如 "NewPass123!"
   - 确认密码：再次输入 "NewPass123!"
3. 观察密码强度指示器变化
4. 点击"更新密码"按钮

**预期结果：**
- ✅ 三个密码输入框都显示为隐藏状态（小黑点）
- ✅ 输入新密码时，强度指示器显示：
  - 弱：红色进度条 1/3
  - 中等：黄色进度条 2/3
  - 强：绿色进度条 5/6
  - 很强：深绿色进度条 100%
- ✅ 显示提示文字："至少8位，包含大小写字母、数字和特殊字符"
- ✅ 点击更新后显示"更新中..."
- ✅ 成功后显示绿色提示："密码更新成功"
- ✅ 表单自动清空

**验证密码已更新：**
1. 退出登录
2. 使用旧密码尝试登录 → 应该失败
3. 使用新密码登录 → 应该成功

---

### 4️⃣ 测试密码修改（错误场景）

#### 测试A：当前密码错误
**操作：**
- 当前密码：输入错误的密码
- 新密码：NewPass456@
- 确认密码：NewPass456@

**预期结果：**
- ✅ 显示红色错误："Current password is incorrect"

#### 测试B：新密码太弱
**操作：**
- 当前密码：正确密码
- 新密码：abc123（不符合要求）
- 确认密码：abc123

**预期结果：**
- ✅ 前端验证失败，显示具体缺少什么要求
- ✅ 例如："Password must contain at least one uppercase letter"

#### 测试C：确认密码不匹配
**操作：**
- 当前密码：正确密码
- 新密码：NewPass456@
- 确认密码：NewPass789#

**预期结果：**
- ✅ 显示红色错误："Passwords do not match"

#### 测试D：新密码与旧密码相同
**操作：**
- 当前密码：OldPass123!
- 新密码：OldPass123!（相同）
- 确认密码：OldPass123!

**预期结果：**
- ✅ 显示红色错误："New password must be different from current password"

---

### 5️⃣ 测试Tab切换

**操作：**
1. 在"个人信息"标签页做一些输入
2. 切换到"安全设置"标签
3. 再切换回"个人信息"标签

**预期结果：**
- ✅ Tab切换流畅无闪烁
- ✅ 活动Tab有蓝色下划线
- ✅ 非活动Tab为灰色
- ✅ Hover时颜色变化
- ✅ Tab图标正确显示（User 和 Lock）

---

### 6️⃣ 测试响应式设计

**操作：**
1. 在桌面浏览器查看
2. 调整浏览器窗口大小（移动端尺寸）
3. 测试各个功能

**预期结果：**
- ✅ 移动端布局适配良好
- ✅ Tab导航仍然可用
- ✅ 表单宽度适应屏幕
- ✅ 按钮和输入框大小合适
- ✅ 文字不溢出

---

### 7️⃣ 测试暗黑模式

**操作：**
1. 切换到暗黑模式
2. 访问Settings页面
3. 测试各个功能

**预期结果：**
- ✅ 背景色正确（深色）
- ✅ 文字颜色正确（浅色）
- ✅ 输入框样式正确
- ✅ 按钮样式正确
- ✅ 成功/错误提示样式正确
- ✅ Tab切换样式正确

---

### 8️⃣ 测试国际化

**操作：**
1. 在中文页面（/zh/settings）测试
2. 在英文页面（/settings）测试

**预期结果：**
- ✅ 所有文案正确翻译
- ✅ 错误提示正确翻译
- ✅ 成功提示正确翻译
- ✅ 表单标签正确翻译
- ✅ 按钮文字正确翻译

---

### 9️⃣ 测试未登录访问

**操作：**
1. 退出登录
2. 直接访问 `/settings` URL

**预期结果：**
- ✅ 自动重定向到登录页 `/login`
- ✅ 无法绕过访问Settings页面

---

### 🔟 测试加载状态

**操作：**
1. 提交表单时观察
2. 快速网络 / 慢速网络测试

**预期结果：**
- ✅ 提交时按钮变为禁用状态
- ✅ 按钮文字变为"保存中..." / "更新中..."
- ✅ 无法重复提交
- ✅ 完成后按钮恢复正常

---

## 快速检查点

### ✅ 功能完整性
- [ ] 用户名修改功能正常
- [ ] 密码修改功能正常
- [ ] 邮箱显示正常（只读）
- [ ] 表单验证正常
- [ ] 错误提示正常
- [ ] 成功提示正常

### ✅ UI/UX
- [ ] Tab切换正常
- [ ] 响应式设计正常
- [ ] 暗黑模式正常
- [ ] 加载状态正常
- [ ] 样式与网站一致

### ✅ 安全性
- [ ] 未登录无法访问
- [ ] 当前密码验证
- [ ] 密码强度要求
- [ ] 数据加密存储

### ✅ 国际化
- [ ] 中文翻译正确
- [ ] 英文翻译正确
- [ ] 路由切换正常

---

## 常见问题排查

### 问题1：无法访问Settings页面
**检查：**
- 是否已登录？
- URL是否正确？
- 路由文件是否存在？

### 问题2：表单提交失败
**检查：**
- 网络请求是否成功？（查看浏览器Network tab）
- 后端API是否正常运行？
- 数据库连接是否正常？

### 问题3：密码修改后无法登录
**检查：**
- 是否记住了新密码？
- 数据库中密码是否正确更新？
- 尝试重置密码功能

### 问题4：样式显示异常
**检查：**
- Tailwind CSS是否正常加载？
- 暗黑模式是否正确应用？
- 浏览器缓存是否需要清理？

---

## 性能检查

### 页面加载
- [ ] 首次加载时间 < 2秒
- [ ] 无明显闪烁或跳跃
- [ ] Tab切换流畅

### API响应
- [ ] 更新用户名响应时间 < 1秒
- [ ] 更新密码响应时间 < 2秒（因为加密）
- [ ] 错误提示即时显示

---

## 完成确认

测试完成后，确认以下所有项：

- [ ] ✅ 所有功能测试通过
- [ ] ✅ UI/UX符合预期
- [ ] ✅ 安全性验证通过
- [ ] ✅ 国际化正常
- [ ] ✅ 响应式设计正常
- [ ] ✅ 暗黑模式正常
- [ ] ✅ 无linter错误
- [ ] ✅ 无TypeScript错误
- [ ] ✅ 无控制台错误

---

**测试人员：** __________  
**测试日期：** __________  
**测试结果：** ✅ 通过 / ⚠️ 部分通过 / ❌ 未通过  
**备注：** ________________________________________________

---

**文档版本：** v1.0  
**最后更新：** 2025-12-28
